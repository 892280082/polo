!function(n){function t(e){if(r[e])return r[e].exports;var u=r[e]={exports:{},id:e,loaded:!1};return n[e].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var r={};return t.m=n,t.c=r,t.p="",t(0)}([function(n,t,r){n.exports=r(8)},function(n,t){"use strict";function r(n,t){var r=Array.prototype.slice.call(arguments),e=r.shift();switch(e){case 0:r.unshift("SERVICE_MONGOOSE_LOG---->");break;case 1:r.unshift("SERVICE_MONGOOSE_WARN---->");break;case 2:r.unshift("SERVICE_MONGOOSE_ERROR---->")}console.log.apply(console,r)}n.exports=r},function(n,t,r){"use strict";function e(n,t){var r=function(n,t){return{key:n,val:t}};n=n.replace(/-/g,".");var e=["$$_","$gt_","$gte_","$lt_","$lte_"],u=_.find(e,function(t){return n.indexOf(t)>=0});if(void 0==u)return r(n,t);if("$$_"===u)return r(n.replace(u,""),{$regex:t,$options:"i"});var i={};return i[u.replace("_","")]=t,r(n.replace(u,""),i)}var u=r(1);t.concactArray=function(n,t){return n.concat(t)},t.dealQuery=function(n){var t={};for(var r in n)if(!(""===n[r]||"undefined"==typeof n[r]||_.isObject(n[r])&&_.keys(n[r]).length<=0)){var u=e(r,n[r]);if(_.has(t,u.key)){var i=t[u.key];_.mapObject(u.val,function(n,t){i[t]=n})}else t[u.key]=u.val}return t},t.merge=function(n,t){for(var r in t)n[r]=t[r]},t.checkSetting=function(n){n.$service.$http||u(1,"$http \u6ca1\u6709\u8bbe\u7f6e")},t.getData=function(n,r){var e=n.$service.$http,i=n.$searchInfo,o=n.$pagingInfo,a={query:i.query,limit:o.pageSize,skip:o.curPage-1,sort:i.sort,populate:i.populate};e.post(i.url,a).success(function(e){return e.err&&u(1,err),t.analyDate(n,e.result),r?r(e.err,e.result):void 0}).error(function(n){u(2,"\u540e\u53f0\u5730\u5740\u94fe\u63a5\u5931\u8d25\uff1a"+i.url)})},t.analyDate=function(n,r){var e=n.$pagingInfo,u=e.waterfull;e.total=r.total,e.curPage=r.skip+1,e.allPage=t.juageAllPage(r.limit,r.total);n.$array;u?n.$array=t.concactArray(n.$array,r.docs):n.$array=r.docs},t.juageAllPage=function(n,t){var r=~~(t/n);return t%n?r+1:r}},,function(n,t,r){"use strict";var e,u=(r(2),r(6));n.exports=e="service_mongoose",angular.module(e,[]).service("mongoose",["$http",function(n){this.$link=function(t){return(new u).__setHttp(n).$link(t)}}])},,function(n,t,r){"use strict";var e,u=r(2);r(1);n.exports=e=function(){this.$pagingInfo={total:0,curPage:1,pageSize:20,allPage:0,waterfull:!1},this.$searchInfo={query:{},sort:null,populate:null,url:null},this.$service={$http:null},this.$array=[],this.$callback=null},e.prototype.__setHttp=function(n){return this.$service.$http=n,this},e.prototype.$link=function(n){return u.checkSetting(this),this.$searchInfo.url=n,this},e.prototype.$getData=function(n,t,r){return u.checkSetting(this),this.$searchInfo.query=n,t&&u.merge(this.$searchInfo,t),r?void u.getData(this,r):this},e.prototype.limit=function(n){return this.$pagingInfo.pageSize=n,this},e.prototype.sort=function(n){return this.$searchInfo.sort=n,this},e.prototype.skip=function(n){return this.$pagingInfo.curPage=n+1,this},e.prototype.waterfull=function(n){return this.$pagingInfo.waterfull=!!n,this},e.prototype.exec=function(n){n&&(this.$callback=n),u.getData(this,n)},e.prototype.$setCurPage=function(n){n=n||this.$pagingInfo.curPage,this.skip(n-1),this.exec(this.$callback)}},function(n,t){"use strict";angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.pagination","ui.bootstrap.paging"]),angular.module("ui.bootstrap.tpls",["uib/template/pagination/pagination.html"]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(n,t,r,e,u){function i(n,t,r){return{number:n,text:t,active:r}}function o(n,t){var r=[],e=1,u=t,o=angular.isDefined(f)&&t>f;o&&(c?(e=Math.max(n-Math.floor(f/2),1),u=e+f-1,u>t&&(u=t,e=u-f+1)):(e=(Math.ceil(n/f)-1)*f+1,u=Math.min(e+f-1,t)));for(var a=e;u>=a;a++){var h=i(a,p(a),a===n);r.push(h)}if(o&&f>0&&(!c||l||s)){if(e>1){if(!s||e>3){var g=i(e-1,"...",!1);r.unshift(g)}if(s){if(3===e){var v=i(2,"2",!1);r.unshift(v)}var _=i(1,"1",!1);r.unshift(_)}}if(t>u){if(!s||t-2>u){var y=i(u+1,"...",!1);r.push(y)}if(s){if(u===t-2){var d=i(t-1,t-1,!1);r.push(d)}var b=i(t,t,!1);r.push(b)}}}return r}var a=this,f=angular.isDefined(t.maxSize)?n.$parent.$eval(t.maxSize):u.maxSize,c=angular.isDefined(t.rotate)?n.$parent.$eval(t.rotate):u.rotate,l=angular.isDefined(t.forceEllipses)?n.$parent.$eval(t.forceEllipses):u.forceEllipses,s=angular.isDefined(t.boundaryLinkNumbers)?n.$parent.$eval(t.boundaryLinkNumbers):u.boundaryLinkNumbers,p=angular.isDefined(t.pageLabel)?function(r){return n.$parent.$eval(t.pageLabel,{$page:r})}:angular.identity;n.boundaryLinks=angular.isDefined(t.boundaryLinks)?n.$parent.$eval(t.boundaryLinks):u.boundaryLinks,n.directionLinks=angular.isDefined(t.directionLinks)?n.$parent.$eval(t.directionLinks):u.directionLinks,e.create(this,n,t),t.maxSize&&a._watchers.push(n.$parent.$watch(r(t.maxSize),function(n){f=parseInt(n,10),a.render()}));var h=this.render;this.render=function(){h(),n.page>0&&n.page<=n.totalPages&&(n.pages=o(n.page,n.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(n,t){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(n,t){return t.templateUrl||"uib/template/pagination/pagination.html"},replace:!0,link:function(n,r,e,u){var i=u[0],o=u[1];o&&i.init(o,t)}}}]),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(n){return{create:function(t,r,e){t.setNumPages=e.numPages?n(e.numPages).assign:angular.noop,t.ngModelCtrl={$setViewValue:angular.noop},t._watchers=[],t.init=function(n,u){t.ngModelCtrl=n,t.config=u,n.$render=function(){t.render()},e.itemsPerPage?t._watchers.push(r.$parent.$watch(e.itemsPerPage,function(n){t.itemsPerPage=parseInt(n,10),r.totalPages=t.calculateTotalPages(),t.updatePage()})):t.itemsPerPage=u.itemsPerPage,r.$watch("totalItems",function(n,e){(angular.isDefined(n)||n!==e)&&(r.totalPages=t.calculateTotalPages(),t.updatePage())})},t.calculateTotalPages=function(){var n=t.itemsPerPage<1?1:Math.ceil(r.totalItems/t.itemsPerPage);return Math.max(n||0,1)},t.render=function(){r.page=parseInt(t.ngModelCtrl.$viewValue,10)||1},r.selectPage=function(n,e){e&&e.preventDefault();var u=!r.ngDisabled||!e;u&&r.page!==n&&n>0&&n<=r.totalPages&&(e&&e.target&&e.target.blur(),t.ngModelCtrl.$setViewValue(n),t.ngModelCtrl.$render())},r.getText=function(n){return r[n+"Text"]||t.config[n+"Text"]},r.noPrevious=function(){return 1===r.page},r.noNext=function(){return r.page===r.totalPages},t.updatePage=function(){t.setNumPages(r.$parent,r.totalPages),r.page>r.totalPages?r.selectPage(r.totalPages):t.ngModelCtrl.$render()},r.$on("$destroy",function(){for(;t._watchers.length;)t._watchers.shift()()})}}}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(n){n.put("uib/template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}])},function(n,t,r){"use strict";var e=r(4);r(7);var u=angular.module("myApp",[e,"ui.bootstrap","mongoose-pagination.html"]);u.controller("main",["$scope","mongoose","$timeout",function(n,t,r){var e;n.salonDao=e=t.$link("/back/curdSalon"),e.$getData({}).sort({creatTime:1}).limit(5).skip(0).waterfull(!1).exec(function(n,t){console.log("doc:",t)}),r(function(){console.log("load new"),e.$setCurPage(3)},2e3)}]),u.directive("mongoosePagin",["$log",function(n){return{scope:{ngModel:"=ngModel"},templateUrl:function(n,t){return"mongoose-pagination.html"},link:function(n,t,r,e){n.$pagingInfo=n.ngModel.$pagingInfo,n.pageChanged=function(){n.ngModel.$setCurPage()}}}}]),angular.module("mongoose-pagination.html",[]).run(["$templateCache",function(n){n.put("mongoose-pagination.html",'<uib-pagination class="pagination-sm"boundary-links="true"max-size="8"ng-model="$pagingInfo.curPage"ng-change="pageChanged()"total-items="$pagingInfo.total"items-per-page="$pagingInfo.pageSize"num-pages="numPages"></uib-pagination>')}])}]);